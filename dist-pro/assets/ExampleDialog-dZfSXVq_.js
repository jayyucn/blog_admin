var G=Object.defineProperty;var U=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var Y=(n,r,l)=>r in n?G(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,j=(n,r)=>{for(var l in r||(r={}))K.call(r,l)&&Y(n,l,r[l]);if(U)for(var l of U(r))Q.call(r,l)&&Y(n,l,r[l]);return n};var h=(n,r,l)=>new Promise((b,_)=>{var k=m=>{try{g(l.next(m))}catch(p){_(p)}},P=m=>{try{g(l.throw(m))}catch(p){_(p)}},g=m=>m.done?b(m.value):Promise.resolve(m.value).then(k,P);g((l=l.apply(n,r)).next())});import{_ as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-O7f5wURp.js";import{_ as ee}from"./Search.vue_vue_type_script_setup_true_lang-k8kOczHe.js";import{_ as te}from"./Dialog.vue_vue_type_style_index_0_lang-1tt6tXnu.js";import{c as ae,e as u}from"./index-_6ODb6pb.js";/* empty css               */import{_ as oe}from"./Table.vue_vue_type_script_lang-8FWITJ9i.js";import{a as le,d as ie,s as re}from"./index-cD8q9CAU.js";import{u as ne}from"./useTable-iigl-U7Y.js";import{_ as se}from"./Write.vue_vue_type_script_setup_true_lang-COkMiL9H.js";import{_ as me}from"./Detail.vue_vue_type_script_setup_true_lang-FsRz8Xf2.js";import{u as de}from"./useCrudSchemas-gfxoY3nP.js";import{i as pe}from"./element-plus-jCRIyYSE.js";import{l as ue,r as d,J as ce,O as s,P as H,u as e,m as w,p as fe,R as c,U as x,V as S,q as ge,B as O,W as $,X as A,y as ve}from"./vue-chunks-lfjuOEhN.js";/* empty css                */import"./el-tooltip-w40geAFS.js";/* empty css                  */import"./Form-bS8bkTLO.js";import"./CategoryDialog-R4JneCfr.js";/* empty css                  *//* empty css               *//* empty css                    */import"./el-radio-button-mwcem1Gu.js";/* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-QUgYYeJ3.js";import"./style.css_vue_type_style_index_0_src_true_lang-G2mSx5xM.js";import"./wang-editor-5PfzxRfe.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-783kQrj-.js";import"./IconPicker-4IQExjbc.js";/* empty css                      */import"./Category.vue_vue_type_style_index_0_lang-LgxT6iqv.js";import"./Tags.vue_vue_type_style_index_0_lang-PhaqOTcr.js";import"./useForm-cxQHj52e.js";import"./useIcon-lCc-p-lp.js";/* empty css                        *//* empty css                         *//* empty css                  */import"./index-SXe0uX5q.js";import"./useValidator-gozR_cIE.js";import"./Descriptions-qz0YGORT.js";import"./tree-sBP3NezW.js";const he={class:"mb-10px"};function L(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ve(n)}const st=ue({__name:"ExampleDialog",setup(n){const r=d([]),{tableRegister:l,tableState:b,tableMethods:_}=ne({fetchDataApi:()=>h(this,null,function*(){const{currentPage:a,pageSize:t}=b,i=yield le(j({pageIndex:e(a),pageSize:e(t)},e(N)));return{list:i.result.list,total:i.result.total}}),fetchDelApi:()=>h(this,null,function*(){return!!(yield ie(e(r)))})}),{loading:k,dataList:P,total:g,currentPage:m,pageSize:p}=b,{getList:z,getElTableExpose:F,delList:q}=_,N=d({}),B=a=>{N.value=a,z()},{t:o}=ae(),J=ce([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:o("tableDemo.index"),type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:o("tableDemo.title"),search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:o("tableDemo.author"),search:{hidden:!0}},{field:"display_time",label:o("tableDemo.displayTime"),search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:o("tableDemo.categories"),search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:a=>s(pe,{type:a.importance===1?"success":a.importance===2?"warning":"danger"},{default:()=>[a.importance===1?o("tableDemo.important"):a.importance===2?o("tableDemo.good"):o("tableDemo.commonly")]})}}},{field:"pageviews",label:o("tableDemo.pageviews"),search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:o("exampleDemo.description"),search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:a=>s("div",{innerHTML:a.content},null)}}},{field:"action",width:"260px",label:o("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:a=>{let t,i,T;return s(H,null,[s(u,{type:"primary",onClick:()=>I(a.row,"edit")},L(t=o("exampleDemo.edit"))?t:{default:()=>[t]}),s(u,{type:"success",onClick:()=>I(a.row,"detail")},L(i=o("exampleDemo.detail"))?i:{default:()=>[i]}),s(u,{type:"danger",onClick:()=>E(a.row)},L(T=o("exampleDemo.del"))?T:{default:()=>[T]})])}}}}]),{allSchemas:y}=de(J),f=d(!1),C=d(""),D=d(null),v=d(""),W=()=>{C.value=o("exampleDemo.add"),D.value=null,f.value=!0,v.value=""},R=d(!1),E=a=>h(this,null,function*(){const t=yield F();r.value=a?[a.id]:(t==null?void 0:t.getSelectionRows().map(i=>i.id))||[],R.value=!0,yield q(e(r).length).finally(()=>{R.value=!1})}),I=(a,t)=>{C.value=o(t==="edit"?"exampleDemo.edit":"exampleDemo.detail"),v.value=t,D.value=a,f.value=!0},M=d(),V=d(!1),X=()=>h(this,null,function*(){const a=e(M),t=yield a==null?void 0:a.submit();t&&(V.value=!0,(yield re(t).catch(()=>{}).finally(()=>{V.value=!1}))&&(f.value=!1,m.value=1,z()))});return(a,t)=>(w(),fe(H,null,[s(e(Z),null,{default:c(()=>[s(e(ee),{schema:e(y).searchSchema,onSearch:B,onReset:B},null,8,["schema"]),ge("div",he,[s(e(u),{type:"primary",onClick:W},{default:c(()=>[S(x(e(o)("exampleDemo.add")),1)]),_:1}),s(e(u),{loading:R.value,type:"danger",onClick:t[0]||(t[0]=i=>E(null))},{default:c(()=>[S(x(e(o)("exampleDemo.del")),1)]),_:1},8,["loading"])]),s(e(oe),{pageSize:e(p),"onUpdate:pageSize":t[1]||(t[1]=i=>O(p)?p.value=i:null),currentPage:e(m),"onUpdate:currentPage":t[2]||(t[2]=i=>O(m)?m.value=i:null),columns:e(y).tableColumns,data:e(P),loading:e(k),pagination:{total:e(g)},onRegister:e(l)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}),s(e(te),{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=i=>f.value=i),title:C.value},{footer:c(()=>[v.value!=="detail"?(w(),$(e(u),{key:0,type:"primary",loading:V.value,onClick:X},{default:c(()=>[S(x(e(o)("exampleDemo.save")),1)]),_:1},8,["loading"])):A("",!0),s(e(u),{onClick:t[3]||(t[3]=i=>f.value=!1)},{default:c(()=>[S(x(e(o)("dialogDemo.close")),1)]),_:1})]),default:c(()=>[v.value!=="detail"?(w(),$(se,{key:0,ref_key:"writeRef",ref:M,"form-schema":e(y).formSchema,"current-row":D.value},null,8,["form-schema","current-row"])):A("",!0),v.value==="detail"?(w(),$(me,{key:1,"detail-schema":e(y).detailSchema,"current-row":D.value},null,8,["detail-schema","current-row"])):A("",!0)]),_:1},8,["modelValue","title"])],64))}});export{st as default};
