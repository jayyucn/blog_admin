var H=Object.defineProperty;var V=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var $=(n,i,l)=>i in n?H(n,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[i]=l,z=(n,i)=>{for(var l in i||(i={}))O.call(i,l)&&$(n,l,i[l]);if(V)for(var l of V(i))W.call(i,l)&&$(n,l,i[l]);return n};var x=(n,i,l)=>new Promise((g,p)=>{var D=m=>{try{u(l.next(m))}catch(c){p(c)}},b=m=>{try{u(l.throw(m))}catch(c){p(c)}},u=m=>m.done?g(m.value):Promise.resolve(m.value).then(D,b);u((l=l.apply(n,i)).next())});import{_ as q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-O7f5wURp.js";import{_ as F}from"./Search.vue_vue_type_script_setup_true_lang-k8kOczHe.js";import{c as J,e as h}from"./index-_6ODb6pb.js";import{_ as G}from"./Table.vue_vue_type_script_lang-8FWITJ9i.js";import{a as K,d as Q}from"./index-cD8q9CAU.js";import{u as X}from"./useTable-iigl-U7Y.js";import{l as Z,aB as ee,r as P,J as te,O as s,P as y,u as a,m as ae,W as le,R as k,U as B,V as E,q as re,B as T,y as oe}from"./vue-chunks-lfjuOEhN.js";import{u as ie}from"./useEventBus-nijHf5Eo.js";import{u as se}from"./useCrudSchemas-gfxoY3nP.js";import{P as ne,i as N,ab as de}from"./element-plus-jCRIyYSE.js";import"./Form-bS8bkTLO.js";/* empty css                  *//* empty css               *//* empty css                */import"./el-tooltip-w40geAFS.js";import"./useForm-cxQHj52e.js";import"./useIcon-lCc-p-lp.js";/* empty css                    *//* empty css                      *//* empty css                  *//* empty css                        */import"./el-radio-button-mwcem1Gu.js";/* empty css                         *//* empty css                  */import"./index-SXe0uX5q.js";import"./tree-sBP3NezW.js";import"./CategoryDialog-R4JneCfr.js";/* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-QUgYYeJ3.js";import"./style.css_vue_type_style_index_0_src_true_lang-G2mSx5xM.js";import"./wang-editor-5PfzxRfe.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-783kQrj-.js";import"./IconPicker-4IQExjbc.js";import"./Category.vue_vue_type_style_index_0_lang-LgxT6iqv.js";import"./Tags.vue_vue_type_style_index_0_lang-PhaqOTcr.js";const me={class:"mb-10px"};function C(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!oe(n)}const Qe=Z({name:"ArticlePage",__name:"ExamplePage",setup(n){const{push:i}=ee(),l=P([]),g=P({}),p=e=>{g.value=e,v()},{tableRegister:D,tableState:b,tableMethods:u}=X({fetchDataApi:()=>x(this,null,function*(){const{currentPage:e,pageSize:t}=b,o=yield K(z({page:a(e),page_size:a(t)},a(g)));let d=o.result.data;return d=d.map(f=>(f.created_at&&(f.created_at=de(f.created_at).format("YYYY年MM月DD日HH时")),f.updated_at,f)),{list:d,total:o.result.pagination.total_count}}),fetchDelApi:()=>x(this,null,function*(){return!!(yield Q(a(l)))})}),{loading:m,dataList:c,total:j,currentPage:_,pageSize:w}=b,{getList:v,getElTableExpose:I,delList:M}=u;v(),ie({name:"getList",callback:e=>{e==="add"&&(_.value=1),v()}});const{t:r}=J(),U=te([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:r("tableDemo.index"),type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:r("tableDemo.title"),width:"100px",search:{component:"Input"},form:{component:"Input",colProps:{span:12}},detail:{minWidth:20}},{field:"description",label:r("exampleDemo.description"),search:{hidden:!0},table:{show:!1},form:{component:"Editor"},detail:{span:24,slots:{default:e=>s("div",{innerHTML:e.content},null)}}},{field:"author",label:r("tableDemo.author"),width:"65px",search:{hidden:!1}},{field:"state",sortable:!0,label:r("exampleDemo.state"),width:"85px",table:{formatter:e=>e.state===0?r("exampleDemo.state1"):r("exampleDemo.state2")},search:{hidden:!1}},{field:"updated_at",label:r("tableDemo.displayTime"),width:"260px",search:{hidden:!0},table:{slots:{default:e=>s(y,null,[s(ne,{modelValue:e.row.updated_at,"onUpdate:modelValue":t=>e.row.updated_at=t,type:"datetime",readonly:!0,placeholder:"Pick a date"},null)])}}},{field:"categories",label:r("tableDemo.categories"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{var t;return(t=e.row)==null?void 0:t.categories.map((o,d)=>s(y,null,[s(N,{type:"success",key:d,class:"mx-1"},{default:()=>[o.name]})]))}}}},{field:"tags",label:r("tableDemo.tags"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{var t;return(t=e.row)==null?void 0:t.tags.map((o,d)=>s(y,null,[s(N,{type:"info",key:d,class:"mx-1"},{default:()=>[o.name]})]))}}}},{field:"meta.views",label:r("tableDemo.pageviews"),width:"65px",search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"action",width:"260px",label:r("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let t,o,d;return s(y,null,[s(h,{type:"primary",onClick:()=>R(e.row,"edit")},C(t=r("exampleDemo.edit"))?t:{default:()=>[t]}),s(h,{type:"success",onClick:()=>R(e.row,"detail")},C(o=r("exampleDemo.detail"))?o:{default:()=>[o]}),s(h,{type:"danger",onClick:()=>A(e.row)},C(d=r("exampleDemo.del"))?d:{default:()=>[d]})])}}}}]),{allSchemas:L}=se(U),Y=()=>{i("/article/article-add")},S=P(!1),A=e=>x(this,null,function*(){const t=yield I();l.value=e?[e.id]:(t==null?void 0:t.getSelectionRows().map(o=>o.id))||[],S.value=!0,yield M(a(l).length).finally(()=>{S.value=!1})}),R=(e,t)=>{i(`/article/article-${t}?id=${e.id}`)};return(e,t)=>(ae(),le(a(q),null,{default:k(()=>[s(a(F),{schema:a(L).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),re("div",me,[s(a(h),{type:"primary",onClick:Y},{default:k(()=>[E(B(a(r)("exampleDemo.add")),1)]),_:1}),s(a(h),{loading:S.value,type:"danger",onClick:t[0]||(t[0]=o=>A(null))},{default:k(()=>[E(B(a(r)("exampleDemo.del")),1)]),_:1},8,["loading"])]),s(a(G),{pageSize:a(w),"onUpdate:pageSize":t[1]||(t[1]=o=>T(w)?w.value=o:null),currentPage:a(_),"onUpdate:currentPage":t[2]||(t[2]=o=>T(_)?_.value=o:null),columns:a(L).tableColumns,data:a(c),loading:a(m),pagination:{total:a(j)},onRegister:a(D)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{Qe as default};
