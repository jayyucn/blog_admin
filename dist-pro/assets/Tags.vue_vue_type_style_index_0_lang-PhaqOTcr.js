var T=(o,d,a)=>new Promise((f,m)=>{var r=t=>{try{s(a.next(t))}catch(i){m(i)}},u=t=>{try{s(a.throw(t))}catch(i){m(i)}},s=t=>t.done?f(t.value):Promise.resolve(t.value).then(r,u);s((a=a.apply(o,d)).next())});import{h as V,p as w}from"./index-_6ODb6pb.js";/* empty css               *//* empty css                  *//* empty css                  */import{i as b,v as B,L as k}from"./element-plus-jCRIyYSE.js";import{l as E,r as c,w as N,m as p,p as v,P as C,a7 as _,O,R as h,u as g,W as x,V as S,U as A,q as y}from"./vue-chunks-lfjuOEhN.js";const L=(o={})=>V.get({url:"/tag",params:o}),U=o=>V.post({url:"/tag",data:o}),q={class:"tags-container"},D=y("svg",{class:"circular",viewBox:"0 0 50 50"},[y("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),G=E({__name:"Tags",props:{onTagsChange:w.func.def(void 0)},setup(o){const d=o,a=c([]);N(()=>a.value.length,()=>{d.onTagsChange&&d.onTagsChange(g(a))});const f=n=>{const l=a.value.indexOf(n);l>-1&&a.value.splice(l,1)};function m(n){return T(this,null,function*(){const e=yield U({name:n,description:""});e.result&&a.value.push(e.result),u.value=""})}const r=c([]),u=c(""),s=c(!1),t=c(),i=n=>{n?(s.value=!0,clearTimeout(t.value),t.value=setTimeout(()=>{L({keyword:n}).then(l=>{s.value=!1,l.result.data.length>0&&(r.value=l.result.data),l.result})},500)):(r.value=[],s.value=!1)};return(n,l)=>(p(),v("div",q,[(p(!0),v(C,null,_(a.value,e=>(p(),x(g(b),{key:e.name,closable:"","disable-transitions":!1,onClose:F=>f(e)},{default:h(()=>[S(A(e.name),1)]),_:2},1032,["onClose"]))),128)),O(g(k),{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),filterable:"",remote:"",allowCreate:"","default-first-option":!0,placeholder:"请输入标签","remote-method":i,onChange:m,loading:s.value,style:{width:"240px"}},{loading:h(()=>[D]),default:h(()=>[(p(!0),v(C,null,_(r.value,e=>(p(),x(g(B),{key:e.name,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]))}});export{G as _};
